!function(e){e.fn.richText=function(t){function a(){var t,a,n="";N.useParagraph!==!1&&document.execCommand("DefaultParagraphSeparator",!1,"p"),"TEXTAREA"===S.prop("tagName")||(S.val()?(t=S.val(),a=S.prop("attributes"),e.each(a,function(){this.name&&(n+=" "+this.name+'="'+this.value+'"')}),S.replaceWith(e("<textarea"+n+' data-richtext="init">'+t+"</textarea>")),S=e('[data-richtext="init"]'),S.removeAttr("data-richtext")):S.html()?(t=S.html(),a=S.prop("attributes"),e.each(a,function(){this.name&&(n+=" "+this.name+'="'+this.value+'"')}),S.replaceWith(e("<textarea"+n+' data-richtext="init">'+t+"</textarea>")),S=e('[data-richtext="init"]'),S.removeAttr("data-richtext")):(a=S.prop("attributes"),e.each(a,function(){this.name&&(n+=" "+this.name+'="'+this.value+'"')}),S.replaceWith(e("<textarea"+n+' data-richtext="init"></textarea>')),S=e('[data-richtext="init"]'),S.removeAttr("data-richtext"))),L=e("<div />",{"class":"richText"});var i=e("<div />",{"class":"richText-toolbar"}),o=e("<div />",{"class":"richText-editor",id:oe,contenteditable:!0});if(i.append(U),N.bold===!0&&U.append(D.clone().append(A)),N.italic===!0&&U.append(D.clone().append(F)),N.underline===!0&&U.append(D.clone().append(H)),N.leftAlign===!0&&U.append(D.clone().append(E)),N.centerAlign===!0&&U.append(D.clone().append(B)),N.rightAlign===!0&&U.append(D.clone().append(I)),N.ol===!0&&U.append(D.clone().append(M)),N.ul===!0&&U.append(D.clone().append(P)),N.fonts===!0&&N.fontList.length>0&&U.append(D.clone().append(X)),N.heading===!0&&U.append(D.clone().append(W)),N.fontColor===!0&&U.append(D.clone().append(Y)),N.imageUpload===!0&&U.append(D.clone().append(Q)),N.fileUpload===!0&&U.append(D.clone().append(_)),N.videoEmbed===!0&&U.append(D.clone().append(z)),N.urls===!0&&U.append(D.clone().append(V)),N.table===!0&&U.append(D.clone().append(G)),N.removeStyles===!0&&U.append(D.clone().append(O)),N.code===!0&&U.append(D.clone().append(j)),o.html(S.val()),L.append(i),L.append(o),L.append(S.clone().hide()),S.replaceWith(L),L.append(e("<div />",{"class":"richText-toolbar"}).append(e("<a />",{"class":"richText-undo is-disabled",html:'<span class="fa fa-undo"></span>'})).append(e("<a />",{"class":"richText-redo is-disabled",html:'<span class="fa fa-repeat"></span>'})).append(e("<a />",{"class":"richText-help",html:'<span class="fa fa-question-circle"></span>'}))),N.height&&N.height>0)L.children(".richText-editor, .richText-initial").css({"min-height":N.height+"px",height:N.height+"px"});else if(N.heightPercentage&&N.heightPercentage>0){var r=L.parent().innerHeight(),l=N.heightPercentage/100*r;l-=2*i.outerHeight(),l-=parseInt(L.css("margin-top")),l-=parseInt(L.css("margin-bottom")),l-=parseInt(L.find(".richText-editor").css("padding-top")),l-=parseInt(L.find(".richText-editor").css("padding-bottom")),L.children(".richText-editor, .richText-initial").css({"min-height":l+"px",height:l+"px"})}N["class"]&&L.addClass(N["class"]),N.id&&L.attr("id",N.id),R(),le.push(L.find("textarea").val())}function n(e,t){"undefined"==typeof t&&(t=null),m(),"heading"===e&&s()?g("<"+t+">"+s()+"</"+t+">"):document.execCommand(e,!1,t)}function i(){var t=e("#"+oe),a=t.html();N.useSingleQuotes===!0&&(a=v(a)),t.siblings(".richText-initial").val(a)}function o(t){var a=e("#"+t),n=a.siblings(".richText-initial").val();a.html(n)}function r(e){var t=document.getElementById(e);if(window.getSelection&&document.createRange){var a=window.getSelection&&window.getSelection();if(a&&a.rangeCount>0){var n=window.getSelection().getRangeAt(0),i=n.cloneRange();i.selectNodeContents(t),i.setEnd(n.startContainer,n.startOffset);var o=i.toString().length;return{start:o,end:o+n.toString().length}}return k?k:{start:0,end:0}}if(document.selection&&document.body.createTextRange){var r=document.selection.createRange(),l=document.body.createTextRange();l.moveToElementText(t),l.setEndPoint("EndToStart",r);var o=l.text.length;return{start:o,end:o+r.text.length}}}function l(){var e=document.getElementById(oe),t=k;if(window.getSelection&&document.createRange){var a=0,n=document.createRange();n.setStart(e,0),n.collapse(!0);for(var i,o=[e],r=!1,l=!1;!l&&(i=o.pop());)if(3===i.nodeType){var d=a+i.length;!r&&t.start>=a&&t.start<=d&&(n.setStart(i,t.start-a),r=!0),r&&t.end>=a&&t.end<=d&&(n.setEnd(i,t.end-a),l=!0),a=d}else for(var s=i.childNodes.length;s--;)o.push(i.childNodes[s]);var c=window.getSelection();c.removeAllRanges(),c.addRange(n)}else if(document.selection&&document.body.createTextRange){var p=document.body.createTextRange();p.moveToElementText(e),p.collapse(!0),p.moveEnd("character",t.end),p.moveStart("character",t.start),p.select()}}function d(t,a){if(9!==a.keyCode)return!1;var n;if(t.getSelection&&(n=t.getSelection(),n.rangeCount>0)){var i=null,o=null;if(a.shiftKey?(o="previous",i="TD"===n.focusNode.nodeName?null!=n.focusNode.previousSibling?n.focusNode.previousSibling:null!=n.focusNode.parentNode.previousSibling?n.focusNode.parentNode.previousSibling.childNodes[n.focusNode.parentNode.previousSibling.childNodes.length-1]:null:null!=n.focusNode.parentNode.previousSibling?n.focusNode.parentNode.previousSibling:null!=n.focusNode.parentNode.parentNode.previousSibling?n.focusNode.parentNode.parentNode.previousSibling.childNodes[n.focusNode.parentNode.parentNode.previousSibling.childNodes.length-1]:null):(o="next",i="TD"===n.focusNode.nodeName?null!=n.focusNode.nextSibling?n.focusNode.nextSibling:null!=n.focusNode.parentNode.nextSibling?n.focusNode.parentNode.nextSibling.childNodes[0]:null:null!=n.focusNode.parentNode.nextSibling?n.focusNode.parentNode.nextSibling:null!=n.focusNode.parentNode.parentNode.nextSibling?n.focusNode.parentNode.parentNode.nextSibling.childNodes[0]:null),null!=i)return n.collapse(i,Math.min(i.length,n.focusOffset+1)),null!=i.textContent&&n.selectAllChildren(i),a.preventDefault(),!0;if(null===i&&"next"===o&&"TD"===n.focusNode.nodeName){for(var r=e(n.focusNode).parents("table"),l=r.find("tr").first().children("td").length,s=e("<tr />"),c=e("<td />"),p=1;l>=p;p++)s.append(c.clone());r.append(s),d(window,{keyCode:9,shiftKey:!1,preventDefault:function(){}})}}return!1}function s(){var e;return window.getSelection?(e=window.getSelection(),e.toString()):document.selection.createRange?(e=document.selection.createRange(),e.text):!1}function c(t){var a=e(".richText-editor#"+t).siblings(".richText-initial");p(a.val()),k=r(t)}function p(e){le.length-1>de&&(le.length=de+1),le[le.length-1]!==e&&le.push(e),de=le.length-1,h()}function h(){0>=de?L.find(".richText-undo").addClass("is-disabled"):L.find(".richText-undo").removeClass("is-disabled"),de>=le.length-1||0===le.length?L.find(".richText-redo").addClass("is-disabled"):L.find(".richText-redo").removeClass("is-disabled")}function f(){de--;var e=le[de];L.find("textarea").val(e),L.find(".richText-editor").html(e),h()}function u(){de++;var e=le[de];L.find("textarea").val(e),L.find(".richText-editor").html(e),h()}function m(){k&&l()}function g(e){var t,a;if(window.getSelection){if(t=window.getSelection(),t.getRangeAt&&t.rangeCount){a=t.getRangeAt(0),a.deleteContents();var n=document.createElement("div");n.innerHTML=e;for(var i,o,r=document.createDocumentFragment();i=n.firstChild;)o=r.appendChild(i);a.insertNode(r),o&&(a=a.cloneRange(),a.setStartAfter(o),a.collapse(!0),t.removeAllRanges(),t.addRange(a))}}else document.selection&&"Control"!==document.selection.type&&document.selection.createRange().pasteHTML(e)}function v(e){if(!e)return"";var t,a;return N.useSingleQuotes===!0?(t=/\s+(\w+\s*=\s*(["][^"]*["])|(['][^']*[']))+/g,a=e.replace(t,function(e,t,a){return a?e.replace(a,a.replace(/\"/g,"'")):e})):(t=/\s+(\w+\s*=\s*(['][^']*['])|(["][^"]*["]))+/g,a=e.replace(t,function(e,t,a){return a?e.replace(a,a.replace(/'/g,'"')):e})),a}function x(e){var t=[],a="";t["#FFFFFF"]="White",t["#000000"]="Black",t["#7F6000"]="Brown",t["#938953"]="Beige",t["#1F497D"]="Dark Blue",t.blue="Blue",t["#4F81BD"]="Light blue",t["#953734"]="Dark red",t.red="Red",t["#4F6128"]="Dark green",t.green="Green",t["#3F3151"]="Purple",t["#31859B"]="Dark Turquois",t["#4BACC6"]="Turquois",t["#E36C09"]="Dark orange",t["#F79646"]="Orange",t["#FFFF00"]="Yellow",N.colors&&N.colors.length>0&&(t=N.colors);for(var n in t)a+='<li class="inline"><a data-command="'+e+'" data-option="'+n+'" style="text-align:left;" title="'+t[n]+'"><span class="box-color" style="background-color:'+n+'"></span></a></li>';return a}function b(t){m(),L.find(".richText-editor").is(":visible")?(L.find(".richText-initial").show(),L.find(".richText-editor").hide(),e(".richText-toolbar").find(".richText-btn").each(function(){e(this).hasClass("fa-code")||e(this).parent("li").attr("data-disable","true")}),T(t,k)):(L.find(".richText-initial").hide(),L.find(".richText-editor").show(),e(".richText-toolbar").find("li").removeAttr("data-disable"))}function T(t,a){var n=e("#"+t),i=n.siblings(".richText-initial"),o=i.val();if(!a||!o)return{start:0,end:0};a.node=i[0];for(var r={start:!1,end:!1,tag:!1,isTag:!1,tagsCount:0},l=0;l<o.length;l++)"<"===o[l]?(r.isTag=!0,r.tag=!1,r.tagsCount++):r.isTag===!0&&">"!==o[l]?r.tagsCount++:r.isTag===!0&&">"===o[l]?(r.isTag=!1,r.tag=!0,r.tagsCount++):r.tag===!0&&(r.tag=!1),a.start+r.tagsCount<=l&&r.isTag===!1&&r.tag===!1&&r.start===!1&&(a.start=l,r.start=!0),a.end+r.tagsCount<=l+1&&r.isTag===!1&&r.tag===!1&&r.end===!1&&(a.end=l+1,r.end=!0);return w(a.node,a.start,a.end),a}function w(e,t,a){if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveStart("character",t),n.moveEnd("character",a),n.select(),e.focus()}else e.setSelectionRange?(e.focus(),e.setSelectionRange(t,a)):"undefined"!=typeof e.selectionStart&&(e.selectionStart=t,e.selectionEnd=a,e.focus())}function C(e,t){var a=y(e),n=!1,i=!1;if(!a)return!1;t?"responsive"!==t?t=t.split("x"):(n=!0,t="640x360",t=t.split("x")):(t="640x360",t=t.split("x"));var o="<br><br>";n===!0&&(o+='<div style="position:relative;height:0;padding-bottom:56.25%">');var r="webkitallowfullscreen mozallowfullscreen allowfullscreen";return"YouTube"===a.platform?(o+='<iframe src="https://www.youtube.com/embed/'+a.id+'?ecver=2" width="'+t[0]+'" height="'+t[1]+'" frameborder="0"'+(n===!0?' style="position:absolute;width:100%;height:100%;left:0"':"")+" "+r+"></iframe>",i=!0):"Vimeo"===a.platform?(o+='<iframe src="https://player.vimeo.com/video/'+a.id+'" width="'+t[0]+'" height="'+t[1]+'" frameborder="0"'+(n===!0?' style="position:absolute;width:100%;height:100%;left:0"':"")+" "+r+"></iframe>",i=!0):"Facebook"===a.platform?(o+='<iframe src="https://www.facebook.com/plugins/video.php?href='+encodeURI(e)+"&show_text=0&width="+t[0]+'" width="'+t[0]+'" height="'+t[1]+'" style="'+(n===!0?'position:absolute;width:100%;height:100%;left:0;border:none;overflow:hidden"':"border:none;overflow:hidden")+'" scrolling="no" frameborder="0" allowTransparency="true" '+r+"></iframe>",i=!0):"Dailymotion"===a.platform&&(o+='<iframe frameborder="0" width="'+t[0]+'" height="'+t[1]+'" src="//www.dailymotion.com/embed/video/'+a.id+'"'+(n===!0?' style="position:absolute;width:100%;height:100%;left:0"':"")+" "+r+"></iframe>",i=!0),n===!0&&(o+="</div>"),o+="<br><br>",i?o:!1}function y(e){var t=/(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(.+)/,a=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,n=/(?:http?s?:\/\/)?(?:www\.)?(?:facebook\.com)\/.*\/videos\/[0-9]+/,i=/(?:http?s?:\/\/)?(?:www\.)?(?:dailymotion\.com)\/video\/([a-zA-Z0-9]+)/,o=e.match(a),r=e.match(t),l=e.match(n),d=e.match(i);return o&&11===o[2].length?{platform:"YouTube",id:o[2]}:r&&r[1]?{platform:"Vimeo",id:r[1]}:l&&l[0]?{platform:"Facebook",id:l[0]}:d&&d[1]?{platform:"Dailymotion",id:d[1]}:!1}function R(){L&&!L.find(".richText-editor").html()&&(N.useParagraph!==!1?L.find(".richText-editor").html("<p><br></p>"):L.find(".richText-editor").html("<div><br></div>"),i())}var N=e.extend({bold:!0,italic:!0,underline:!0,leftAlign:!0,centerAlign:!0,rightAlign:!0,ol:!0,ul:!0,heading:!0,fonts:!0,fontList:["Arial","Arial Black","Comic Sans MS","Courier New","Geneva","Georgia","Helvetica","Impact","Lucida Console","Tahoma","Times New Roman","Verdana"],fontColor:!0,imageUpload:!0,fileUpload:!0,videoEmbed:!0,urls:!0,table:!0,removeStyles:!0,code:!0,colors:[],fileHTML:"",imageHTML:"",useSingleQuotes:!1,height:0,heightPercentage:0,id:"","class":"",useParagraph:!1},t),S=e(this);S.addClass("richText-initial");var L,k,U=e("<ul />"),D=e("<li />"),A=e("<a />",{"class":"richText-btn fa fa-bold","data-command":"bold"}),F=e("<a />",{"class":"richText-btn fa fa-italic","data-command":"italic"}),H=e("<a />",{"class":"richText-btn fa fa-underline","data-command":"underline"}),E=e("<a />",{"class":"richText-btn fa fa-align-left","data-command":"justifyLeft"}),B=e("<a />",{"class":"richText-btn fa fa-align-center","data-command":"justifyCenter"}),I=e("<a />",{"class":"richText-btn fa fa-align-right","data-command":"justifyRight"}),M=e("<a />",{"class":"richText-btn fa fa-list-ol","data-command":"insertOrderedList"}),P=e("<a />",{"class":"richText-btn fa fa-list","data-command":"insertUnorderedList"}),W=e("<a />",{"class":"richText-btn fa fa-header"}),X=e("<a />",{"class":"richText-btn fa fa-font"}),Y=e("<a />",{"class":"richText-btn fa fa-paint-brush"}),Q=e("<a />",{"class":"richText-btn fa fa-image"}),z=e("<a />",{"class":"richText-btn fa fa-video-camera"}),_=e("<a />",{"class":"richText-btn fa fa-file-text-o"}),V=e("<a />",{"class":"richText-btn fa fa-link"}),G=e("<a />",{"class":"richText-btn fa fa-table"}),O=e("<a />",{"class":"richText-btn fa fa-recycle","data-command":"removeFormat"}),j=e("<a />",{"class":"richText-btn fa fa-code","data-command":"toggleCode"}),q=e("<div />",{"class":"richText-dropdown-outer"}),K=e("<span />",{"class":"richText-dropdown-close",html:'<span class="fa fa-times"></span>'}),Z=e("<ul />",{"class":"richText-dropdown"}),$=e("<div />",{"class":"richText-dropdown"}),J=e("<div />",{"class":"richText-form"}),ee=e("<div />",{"class":"richText-form-item"}),te=e("<label />"),ae=e("<input />",{type:"text"}),ne=(e("<input />",{type:"file"}),e("<select />")),ie=e("<button />",{text:"Einfügen","class":"btn"}),oe="richText-"+Math.random().toString(36).substring(7),re=null,le=[],de=0,se=Z.clone();se.append(e("<li />",{html:'<a data-command="formatBlock" data-option="h1">Title #1</a>'})),se.append(e("<li />",{html:'<a data-command="formatBlock" data-option="h2">Title #2</a>'})),se.append(e("<li />",{html:'<a data-command="formatBlock" data-option="h3">Title #3</a>'})),se.append(e("<li />",{html:'<a data-command="formatBlock" data-option="h4">Title #4</a>'})),W.append(q.clone().append(se.prepend(K.clone())));for(var ce=N.fontList,pe=Z.clone(),he=0;he<ce.length;he++)pe.append(e("<li />",{html:'<a style="font-family:'+ce[he]+';" data-command="fontName" data-option="'+ce[he]+'">'+ce[he]+"</a>"}));X.append(q.clone().append(pe.prepend(K.clone())));var fe=Z.clone();fe.html(x("forecolor")),Y.append(q.clone().append(fe.prepend(K.clone())));var ue=$.clone(),me=J.clone().attr("id","richText-URL").attr("data-editor",oe);me.append(ee.clone().append(te.clone().text("URL").attr("for","url")).append(ae.clone().attr("id","url"))),me.append(ee.clone().append(te.clone().text("Text").attr("for","urlText")).append(ae.clone().attr("id","urlText"))),me.append(ee.clone().append(te.clone().text("Open in").attr("for","openIn")).append(ne.clone().attr("id","openIn").append(e("<option />",{value:"_self",text:"Same tab"})).append(e("<option />",{value:"_blank",text:"New tab"})))),me.append(ee.clone().append(ie.clone())),ue.append(me),V.append(q.clone().append(ue.prepend(K.clone())));var ge=$.clone(),ve=J.clone().attr("id","richText-Video").attr("data-editor",oe);ve.append(ee.clone().append(te.clone().text("URL").attr("for","videoURL")).append(ae.clone().attr("id","videoURL"))),ve.append(ee.clone().append(te.clone().text("Size").attr("for","size")).append(ne.clone().attr("id","size").append(e("<option />",{value:"responsive",text:"Responsive"})).append(e("<option />",{value:"640x360",text:"640x360"})).append(e("<option />",{value:"560x315",text:"560x315"})).append(e("<option />",{value:"480x270",text:"480x270"})).append(e("<option />",{value:"320x180",text:"320x180"})))),ve.append(ee.clone().append(ie.clone())),ge.append(ve),z.append(q.clone().append(ge.prepend(K.clone())));var xe=$.clone(),be=J.clone().attr("id","richText-Image").attr("data-editor",oe);N.imageHTML&&(e(N.imageHTML).find("#imageURL").length>0||"imageURL"===e(N.imageHTML).attr("id"))?be.html(N.imageHTML):(be.append(ee.clone().append(te.clone().text("Image URL").attr("for","imageURL")).append(ae.clone().attr("id","imageURL"))),be.append(ee.clone().append(te.clone().text("Align").attr("for","align")).append(ne.clone().attr("id","align").append(e("<option />",{value:"left",text:"Left"})).append(e("<option />",{value:"center",text:"Center"})).append(e("<option />",{value:"right",text:"Right"}))))),be.append(ee.clone().append(ie.clone())),xe.append(be),Q.append(q.clone().append(xe.prepend(K.clone())));var Te=$.clone(),we=J.clone().attr("id","richText-File").attr("data-editor",oe);N.fileHTML&&(e(N.fileHTML).find("#fileURL").length>0||"fileURL"===e(N.fileHTML).attr("id"))?we.html(N.fileHTML):(we.append(ee.clone().append(te.clone().text("File URL").attr("for","fileURL")).append(ae.clone().attr("id","fileURL"))),we.append(ee.clone().append(te.clone().text("Link text").attr("for","fileText")).append(ae.clone().attr("id","fileText")))),we.append(ee.clone().append(ie.clone())),Te.append(we),_.append(q.clone().append(Te.prepend(K.clone())));var Ce=$.clone(),ye=J.clone().attr("id","richText-Table").attr("data-editor",oe);return ye.append(ee.clone().append(te.clone().text("Rows").attr("for","tableRows")).append(ae.clone().attr("id","tableRows").attr("type","number"))),ye.append(ee.clone().append(te.clone().text("Columns").attr("for","tableColumns")).append(ae.clone().attr("id","tableColumns").attr("type","number"))),ye.append(ee.clone().append(ie.clone())),Ce.append(ye),G.append(q.clone().append(Ce.prepend(K.clone()))),a(),L.find(".richText-help").on("click",function(){var t=e(this).parents(".richText");if(t){var a=e("<div />",{"class":"richText-help-popup",style:"position:absolute;top:0;right:0;bottom:0;left:0;background-color: rgba(0,0,0,0.3);"}),n=e("<div />",{style:"position:relative;margin:60px auto;padding:20px;background-color:#FAFAFA;width:70%;font-family:Calibri,Verdana,Helvetica,sans-serif;font-size:small;"}),i=e("<div />",{html:'<span id="closeHelp" style="display:block;position:absolute;top:0;right:0;padding:10px;cursor:pointer;" class="fa fa-times" title="Close"></span>'});i.append("<h3>RichText</h3>"),i.append('<hr>Powered by <a href="https://github.com/webfashionist/RichText" target="_blank">webfashionist/RichText</a> (Github) <br>License: <a href="https://github.com/webfashionist/RichText/blob/master/LICENSE" target="_blank">AGPL-3.0</a>'),a.append(n.append(i)),t.append(a),a.on("click","#closeHelp",function(){e(this).parents(".richText-help-popup").remove()})}}),e(document).on("click",".richText-undo, .richText-redo",function(t){var a=e(this);a.hasClass("richText-undo")&&!a.hasClass("is-disabled")?f():a.hasClass("richText-redo")&&!a.hasClass("is-disabled")&&u()}),e(document).on("input change blur keydown",".richText-editor",function(t){return 9!==t.keyCode&&"9"!==t.keyCode||"keydown"!==t.type?(R(),i(),void c(e(this).attr("id"))):(t.preventDefault(),d(window,t),!1)}),e(document).on("input change blur",".richText-initial",function(){N.useSingleQuotes===!0&&e(this).val(v(e(this).val()));var t=e(this).siblings(".richText-editor").attr("id");o(t),c(t)}),e(document).on("dblclick mouseup",".richText-editor",function(){var t=e(this).attr("id");c(t)}),e(document).on("click","#richText-Video button.btn",function(t){t.preventDefault();var a=e(this),n=a.parent(".richText-form-item").parent(".richText-form");if(n.attr("data-editor")===oe){var o=n.find("input#videoURL").val(),r=n.find("select#size").val();if(o){var d="";d=C(o,r),d?(N.useSingleQuotes===!0,l(),g(d),i(),n.find("input#videoURL").val(""),e(".richText-toolbar li.is-selected").removeClass("is-selected")):(n.prepend(e("<div />",{style:"color:red;display:none;","class":"form-item is-error",text:"Video URL not supported"})),n.children(".form-item.is-error").slideDown(),setTimeout(function(){n.children(".form-item.is-error").slideUp(function(){e(this).remove()})},5e3))}else n.prepend(e("<div />",{style:"color:red;display:none;","class":"form-item is-error",text:"Please enter an URL"})),n.children(".form-item.is-error").slideDown(),setTimeout(function(){n.children(".form-item.is-error").slideUp(function(){e(this).remove()})},5e3)}}),e(document).on("mousedown",function(t){var a=e(t.target);if("IMG"===a.prop("tagName")&&a.parents("#"+oe)){startX=t.pageX,startY=t.pageY,startW=a.innerWidth(),startH=a.innerHeight();var n=(a.offset().left,a.offset().left+a.innerWidth()),i=a.offset().top+a.innerHeight(),o=(a.offset().top,!1);a.css({cursor:"default"}),startY<=i&&startY>=i-20&&startX>=n-20&&startX<=n&&(re=a,re.css({cursor:"nwse-resize"}),o=!0),o!==!0&&!re||re.data("width")?o===!0||re?t.preventDefault():re=null:(re.data("width",a.parents("#"+oe).innerWidth()),re.data("height",3*a.parents("#"+oe).innerHeight()),t.preventDefault())}}),e(document).mouseup(function(){re&&re.css({cursor:"default"}),re=null}).mousemove(function(e){if(null!==re){var t=re.data("width"),a=re.width(),n=re.data("height"),o=re.height();startW+e.pageX-startX<=t&&startH+e.pageY-startY<=n?(re.innerWidth(startW+e.pageX-startX),i()):startW+e.pageX-startX<=a&&startH+e.pageY-startY<=o&&(re.innerWidth(startW+e.pageX-startX),i())}}),e(document).on("click","#richText-URL button.btn",function(t){t.preventDefault();var a=e(this),n=a.parent(".richText-form-item").parent(".richText-form");if(n.attr("data-editor")===oe){var i=n.find("input#url").val(),o=n.find("input#urlText").val(),r=n.find("#openIn").val();if(r||(r="_self"),o||(o=i),i){var d="";d=N.useSingleQuotes===!0?"<a href='"+i+"' target='"+r+"'>"+o+"</a>":'<a href="'+i+'" target="'+r+'">'+o+"</a>",l(),g(d),n.find("input#url").val(""),n.find("input#urlText").val(""),e(".richText-toolbar li.is-selected").removeClass("is-selected")}else n.prepend(e("<div />",{style:"color:red;display:none;","class":"form-item is-error",text:"Please enter an URL"})),n.children(".form-item.is-error").slideDown(),setTimeout(function(){n.children(".form-item.is-error").slideUp(function(){e(this).remove()})},5e3)}}),e(document).on("click","#richText-Image button.btn",function(t){t.preventDefault();var a=e(this),n=a.parent(".richText-form-item").parent(".richText-form");if(n.attr("data-editor")===oe){var i=n.find("#imageURL").val(),o=n.find("select#align").val();if(o||(o="center"),i){var r="";r=N.useSingleQuotes===!0?"center"===o?"<div style='text-align:center;'><img src='"+i+"'></div>":"<img src='"+i+"' align='"+o+"'>":"center"===o?'<div style="text-align:center;"><img src="'+i+'"></div>':'<img src="'+i+'" align="'+o+'">',l(),g(r),n.find("input#imageURL").val(""),e(".richText-toolbar li.is-selected").removeClass("is-selected")}else n.prepend(e("<div />",{style:"color:red;display:none;","class":"form-item is-error",text:"Please select an image."})),n.children(".form-item.is-error").slideDown(),setTimeout(function(){n.children(".form-item.is-error").slideUp(function(){e(this).remove()})},5e3)}}),e(document).on("click","#richText-File button.btn",function(t){t.preventDefault();var a=e(this),n=a.parent(".richText-form-item").parent(".richText-form");if(n.attr("data-editor")===oe){var i=n.find("#fileURL").val(),o=n.find("#fileText").val();if(o||(o=i),i){var r="";r=N.useSingleQuotes===!0?"<a href='"+i+"' target='_blank'>"+o+"</a>":'<a href="'+i+'" target="_blank">'+o+"</a>",l(),g(r),n.find("input#fileURL").val(""),n.find("input#fileText").val(""),e(".richText-toolbar li.is-selected").removeClass("is-selected")}else n.prepend(e("<div />",{style:"color:red;display:none;","class":"form-item is-error",text:"Please select a file."})),n.children(".form-item.is-error").slideDown(),setTimeout(function(){n.children(".form-item.is-error").slideUp(function(){e(this).remove()})},5e3)}}),e(document).on("click","#richText-Table button.btn",function(t){t.preventDefault();var a=e(this),n=a.parent(".richText-form-item").parent(".richText-form");if(n.attr("data-editor")===oe){var i=n.find("input#tableRows").val(),o=n.find("input#tableColumns").val();(!i||0>=i)&&(i=2),(!o||0>=o)&&(o=2);var r="";r=N.useSingleQuotes===!0?"<table class='table-1'><tbody>":'<table class="table-1"><tbody>';for(var d=1;i>=d;d++){r+="<tr>";for(var s=1;o>=s;s++)r+="<td> </td>";r+="</tr>"}r+="</tbod></table>",l(),g(r),n.find("input#tableColumns").val(""),n.find("input#tableRows").val(""),e(".richText-toolbar li.is-selected").removeClass("is-selected")}}),e(document).on("click",function(t){var a=e(t.target);if(0===a.parents(".richText-toolbar").length);else if(a.hasClass("richText-dropdown-outer"))a.parent("a").parent("li").removeClass("is-selected");else if(a.find(".richText").length>0)e(".richText-toolbar li").removeClass("is-selected");else if(a.parent().hasClass("richText-dropdown-close"))e(".richText-toolbar li").removeClass("is-selected");else if(a.hasClass("richText-btn")&&e(t.target).children(".richText-dropdown-outer").length>0)if(a.parent("li").addClass("is-selected"),a.hasClass("fa-link")){l();var n=s();a.find("input#urlText").val(""),a.find("input#url").val(""),n&&a.find("input#urlText").val(n)}else a.hasClass("fa-image")}),e(document).on("click",".richText-toolbar a[data-command]",function(t){var a=e(this),i=a.closest(".richText-toolbar"),o=i.siblings(".richText-editor");if(o.length>0&&(!a.parent("li").attr("data-disable")||"false"===a.parent("li").attr("data-disable"))){t.preventDefault();var r=e(this).data("command");if("toggleCode"===r)b(o.attr("id"));else{var l=null;e(this).data("option")&&(l=e(this).data("option"),l.match(/^h[1-6]$/)&&(r="heading")),n(r,l),"removeFormat"===r&&n("formatBlock","div")}}a.parents("li.is-selected").removeClass("is-selected")}),e(this)}}(jQuery);